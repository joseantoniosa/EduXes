\chapter{Working plan}
%\thispagestyle {empty}
\section{Description and objectives}

	An open source multi-platform management application for high school teachers is developed. It can be run on a smartphone or tablet. 
	The actual objectives of the application are students management:
	\begin{itemize}
	  \item Attendance and punctuality control. 
	  \item Misbehaviour control.
	  \item Activities assessment. Each student will have an activity mark.
	\end{itemize}

	Application should also include these features:
	\begin{itemize}
	  \item Data visualization. As table-like format. Attendance and misbehaviour
	  \item Server synchronization with a custom application or Xade \cite{Xade}.
	\end{itemize}

	The final goal is to develop an application to make teacher's work easier and comfortable. This application is focused on user  (teacher) experience.
	Also an objective is to write extensible, easy to read code, which allows external developers to take part into application development.
	
	Task to be done:
	\begin{itemize}
	  \item Study state-of-art solutions: 
  \subitem  Find out other solutions: PDAs and smart-phone or tablet related and web-based applications.
  \subitem  Download to study and reuse graphical user interfaces, code or/and database structure. 
  \item   Develop database structure: tables (field names and type of data), and relationships among tables. 
  \item   Preparation for development:
\subitem  Build development and staging environment: 
\subsubitem Install Eclipse \cite{Eclipse}, Android Virtual Machine \cite{AndroidDevelopmentKit}, Aptana Plugin for Eclipse, JQuery, JQueryMobile \cite{JQueryMobile} and Phonegap \cite{PhoneGap} from their respective websites \cite{PhoneGapGS}.
\subitem   Choose application name and folder's policy.
\subitem   Make a simple application: only a blank page.
\subitem  Configure a git repository and upload the application: \cite{EduXes}.
	\end{itemize}
	
		
  Development will follow these stages:
	\begin{itemize}
  \item   Populate database with sample data. Firstly, data will be hard-coded into source code to stagging. Several tables will be created:
  groups, students, sessions, teacher schedule, students attendance, activities, student activities, and activities per group. Secondly 
  the appropiate windows to manage these tables will be built.
  
  \item   Groups: Several groups (four) of students will be hard-coded into javascript source code, with three or four students each other.
  \subitem  Make list of groups window. This will list the four groups.
  \subitem  Groups management window. Another group could be added, or removed.
  
  \item  Students information:
  \subitem   Make list of students window per group and complete list of students. 
  \subitem   Students management window: to insert and update data students: name, surname, birthday, address, e-mail,  tutor name,
    landline and cell phone numbers and nationality.
    
  \item  Sessions. Each lecture has a description (as 'first hour', or 'recreation'), starting and ending time.  These sessions will be hard-coded on first version.
  \item  Teacher schedule. For the current teacher, it contains weekly and daily schedule: name of group, session and day of the week. This information will be also hard-coded. 
  \item Main window (or \emph{page} in PhoneGap notation) will be created. Teacher can set current data and go to \textit{daily page}, 
   manage activities, students and groups or manage reports: assessment and attendance. Next page will be \textit{daily page}.
   
  \item Timetable for current date: daily schedule, list of groups for each day ordered by session.
  
  \item Attendance page will be next to be build. It contains a list of students by group. Teacher can assign an attendance code to each student (attendance, misbehaviour, unpunctuality or excused).
  
  \item Assessment page is next to previous one. It contains one upper list of activities and a list of students similar to 
  \emph{attendance page }. Teacher could set activity and assign adequate mark to each student.
     
  \item  Activities. This page manage activities (add and disable activities \footnote{still not coded} ): name and description of assessable exercises. 
  \subitem  Activities group will be set in activities page, and activities student will be related with assessment.
  \item Reports pages.
  \subitem  List activities.
  \subitem  List groups.
  \subitem  List students by group.
  \subitem  List students attendance by week. User can select previous or next week, or set another date.
  \subitem  List students marks and final mark.
  
  \item Error handling. While developing each SQL query, any error will be catched and an error window will appears. 
  \item Eventually, test into real hardware: an Android 2.3.3 mobile phone, tablets, and so on.
  \end{itemize}
  
	   Next steps will include :  
  \begin{itemize}
  \item   Load data from an external file. This is well-documented \cite{}.  
  \item   Load images from disk (SD-Card).
  \item  Save or download data from database to disk.
  \item  Xade web interface.
  \subitem    a) Study Xade web interface.
  \subitem    b) Develop an ad-hoc application for retrieve Xade's data. With javascript or a native one. 
  \subitem    8. Develop an ad-hoc application for store data. 
  \subitem    9. Synchronization with a custom server or with Xade.
  \item   Test units. To ensure previous step were implemented.
  \item   User documentation. Manual with images.
  \item   Developer's documentation.
  \item   Find out a website to host a forum, a bug report system,  documentation and application download.
	\end{itemize}
	
In the following table a broad estimation of time spent in each task are shown.  


\begin{tabular}{lc}
Task    & Time (hours) \\
\hline 
State-of-art solutions   & 10 \\
Develop database & 8 \\
Preparation for development & 40 \\
Development.  & \\
\cr

	Populate database with sample data & 20 \\
	Groups. List and management & 50 \\
	Students. List and management & 30 \\
	Timetable for actual date & 80 \\
	Add attendance, behaviour & 50 \\
	Add error handling &2 \\
	Retrieve and insert data from and to database &30 \\
	List of attendance, misbehaviour incidents. &12 \\
	Add activities grades for each student. &12 \\
	List students marks and final mark. &14 \\
	Activities management window  &14 \\
	Management of student notes. &20 \\
	List of student notes.  &2 \\
Test into real hardware &20 \\
\hline
Total &384 \\
\end{tabular}

\section {Motivation}
  As a Technologies teacher, in my daily work I have to evaluate students work such as working with tools, cooperative work with other classmates etc., besides usual activities as written exercises. A long data sheet could used, or an awkward long spreadsheet, but a portable device with a custom application should be desirable.
  
	This application tries to increase teacher's productivity because teacher only has to write attendance, or unpunctuality two times (on official report and on application's window), and classroom notes and activity grades on very easy way.
	
	The most important feature is to be as easy, fast and intuitive as possible. It could be desirable to be platform independent (Android, iOS, Windows RT), but Android is preferred because it is open source and has a higher market share.
	
	On the other hand, development of this application improves my computer science skills in  mobile-phone applications development: JQuery,  jQueryMobile, PhoneGap/Cordova, SQLite, Android,  git repository management.

\section {Methodology}
	This work was carried on building little blocks, also called pages, and make it up into final application. Database structure was separated from interface, and interface was also separated into dynamic and static contents. Each new functionality was written, tested, and
	polished. Each new function was written from previous one, and so on.
	\subsection{HTML}
  There are only two html files: \textbf{index.html} and \textbf{remove.html}. The most important: \textbf{index.html} file is build by
   blocks called pages, gathered together \cite{JQueryMobilePage}. Each page is its own {\bf div } 
   with custom properties (\emph{propieraty} properties in Eclipse jargon ) : {\bf data-role="page"}. Below as show an example: list of several reports, user could choose one and a function (\emph{onReportListAttendance() } or \emph{onReportListAssessment() }  ) is executed .
  
\begin{bclogo}[couleur=blue!30,arrondi=0.1,ombre=true ] 
{Reports Page}
\begin{verbatim}
  
 <div data-role="page" id="list_reports" data-add-back-btn="false">
            <div data-role="header"  data-back-btn-text="previous" 
              data-add-back-btn="false" >
            <a href="#daily_work"  data-icon="arrow-l" data-theme="a" 
              data-role="button">Back</a>

                <h1>Reports</h1>
            </div>
            <div data-role="content">

                <ul data-role="listview" id="list_reports_ul" 
                  data-split-icon="gear" data-split-theme="a" 
                  data-filter="false" 
                  data-inset="true" data-theme="a" >
                <li><a href="#" onClick="onReportListAttendance();"
                 >Attendance</a></li>
                <li><a href="#" onClick="onReportListAssessment();" 
                >Assessment</a></li>
                <li><a href="#" onClick="" >File</a></li>
                </ul>
            </div>
            <div data-role="footer" class="footer-docs" data-rel="back"
             data-theme="a">
             </div>
 </div>
\end{verbatim}

\end{bclogo}

A complete list of pages is shown below:

\begin{bclogo}[couleur=orange!30,arrondi=0.1,ombre=true ] 
{List of Pages}
\begin{tabular}{ll}
intro & daily\_work \\
list\_reports &
list\_settings \\
file &
daily\_schedule \\
list\_students\_attendance &
list\_students\_assessment \\
list\_students\_attendance\_by\_group  &
general\_list\_attendance \\

list\_groups\_attendance  &
list\_groups\_assessment \\

list\_students\_assessment\_reports &

list\_groupsto\_edit \\
edit\_new\_group &

edit\_groups \\
list\_groups &

list\_students\_by\_group \\
list\_students &
edit\_student \\
edit\_new\_student &

list\_all\_activities \\
update\_activity
	\end{tabular}

\end{bclogo}	

	
	\subsection{Interface code }
	There is only onle file which deals with interface interactions (events from {\bf html} files): \emph{ interface.js}
	\subsection{Database code}
  The file which carry on querys and data manipulation on database (SQLite) is : \emph{ database.js}
		\subsection{Tools}
	
	Tools involved were Eclipse IDE (with plug-ins) and Android Virtual Manager (AVM) on Debian GNU/Linux Wheezy. When a new functionality was developed, application was tested on AVM,  if it worked, source code was polished, applicable was tested again, if it was satisfactory a new change was committed into git repository. From time to time application was downloaded from git repository into a real hardware and tested. 
	
	%% logo=\bcrayon,
\begin{bclogo}[couleur=blue!30,arrondi=0.1, logo=\bcpanchant, barre=zigzag,  ombre=true ] 
{Main Page}
\begin{verbatim}
<div data-role="page" id="daily_work">
    <div data-role="header" data-add-back-btn="true" data-theme="a">
                <h1>Day</h1>
    </div>
    <div data-role="content" data-theme="a">
        <div class="ui-grid-b">
            <div class="ui-block-a">
                <div data-role="fieldcontain">
                    <label for="date"  >Date:</label>
                </div>
            </div>
            <div class="ui-block-b">
                <input id="daily_date_scroller"
                   name="daily_date_scroller" />
            </div>
            <div class="ui-block-c">
                <a href="#" data-role='button' 
                  data-icon='info' data-iconpos='notext' 
                  style='float: right;' 
                  onClick="help('date');">Help</a>
                <a href="#" data-role="button" 
                  data-icon="arrow-r" data-iconpos="notext"  
                  onclick="open_daily_page() " >Go</a>
            </div>
        </div>
    </div>
    <div data-role="navbar">
        <ul>
            <li>
                <a href="#" onClick="onGeneralFile()"  
                data-role="button" data-icon="star"  
                data-theme="a" > File</a>
            </li>
            <li>
                <a href="#" onClick="onGeneralListReports();"  
                data-role="button" data-icon="grid"  
                data-theme="a" >Reports</a>
            </li>
            <li>
                <a href="#" onClick="onGeneralListSettings();" 
                data-role="button" data-icon="gear"   
                data-theme="a" >Settings</a>
            </li>
        </ul>
    </div><!-- /navbar -->
    <div data-role="footer" class="footer-docs" data-theme="a">
        <p   style="text-align:center;"  id="teachers_name"></p>
    </div>
</div> 
\end{verbatim}

\end{bclogo}

\newpage

	
\section {Work plan}

Several problems were faced:
Eclipse environment: A stable, reliable and up-to-date IDE, with several plug-ins is needed. Download vanilla Eclipse Juno from its web-site is chosen because it is more stable, reliable, compatible with newer versions.  Aptana Javascript plugin was chosen because Aptana allows source code auto-completion in JQuery.
PhoneGap and Android incompatibilities. Android 2.3.3 requires JQuery-1.8.1 and does not work on higher versions. 
Error handlers. I have had several problems with tx.executeSql(...) function, it confused me with db.transaction(...): 
tx.executeSql(sql, [parameters],  successHandler, errorHandler)
and
db.transaction(queryFunction, errorHandler, successHandler)  
have up to four and three parameters respectively, only first one is mandatory. I rather use success and error handlers for tx.executeSql function, atomic error control could be better choice.
Passing variables to functions: Only if another solution is not known or feasible, global variables are used: named after global\_\*, and in block capitals.
Deadline. Development was delayed because I have no enough spare time and above problems were time costly.

